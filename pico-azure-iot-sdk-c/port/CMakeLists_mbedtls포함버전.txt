add_library(AzureSDK STATIC
"src/agenttime.c"
"src/platform.c"
"src/netif.c"
"src/netutil.c"
"src/tcpsocketconnection_c.c"
"src/socketio_mbed.c"
"src/tlsio_mbedtls.c"
"src/lock.c"
"src/threadapi_nonos.c"
"src/tickcounter_nonos.c"
#"${AZURE_SDK_DIR}/c-utility/pal/socket_async.c"
"${AZURE_SDK_DIR}/c-utility/adapters/httpapi_compact.c"
"${AZURE_SDK_DIR}/certs/certs.c"
"${AZURE_SDK_DIR}/c-utility/pal/tlsio_options.c"
"${AZURE_SDK_DIR}/c-utility/src/xlogging.c"
"${AZURE_SDK_DIR}/c-utility/src/singlylinkedlist.c"
"${AZURE_SDK_DIR}/c-utility/src/buffer.c"
"${AZURE_SDK_DIR}/c-utility/src/consolelogger.c"
"${AZURE_SDK_DIR}/c-utility/src/constbuffer.c"
"${AZURE_SDK_DIR}/c-utility/src/constmap.c"
"${AZURE_SDK_DIR}/c-utility/src/crt_abstractions.c"
"${AZURE_SDK_DIR}/c-utility/src/doublylinkedlist.c"
"${AZURE_SDK_DIR}/c-utility/src/gballoc.c"
"${AZURE_SDK_DIR}/c-utility/src/gb_stdio.c"
"${AZURE_SDK_DIR}/c-utility/src/gb_time.c"
"${AZURE_SDK_DIR}/c-utility/src/hmac.c"
"${AZURE_SDK_DIR}/c-utility/src/hmacsha256.c"
"${AZURE_SDK_DIR}/c-utility/src/httpapiex.c"
"${AZURE_SDK_DIR}/c-utility/src/httpapiexsas.c"
"${AZURE_SDK_DIR}/c-utility/src/httpheaders.c"
"${AZURE_SDK_DIR}/c-utility/src/map.c"
"${AZURE_SDK_DIR}/c-utility/src/optionhandler.c"
"${AZURE_SDK_DIR}/c-utility/src/sastoken.c"
"${AZURE_SDK_DIR}/c-utility/src/sha1.c"
"${AZURE_SDK_DIR}/c-utility/src/sha224.c"
"${AZURE_SDK_DIR}/c-utility/src/sha384-512.c"
"${AZURE_SDK_DIR}/c-utility/src/strings.c"
"${AZURE_SDK_DIR}/c-utility/src/string_token.c"
"${AZURE_SDK_DIR}/c-utility/src/string_tokenizer.c"
"${AZURE_SDK_DIR}/c-utility/src/urlencode.c"
"${AZURE_SDK_DIR}/c-utility/src/usha.c"
"${AZURE_SDK_DIR}/c-utility/src/vector.c"
"${AZURE_SDK_DIR}/c-utility/src/xio.c"
"${AZURE_SDK_DIR}/c-utility/src/azure_base64.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothubtransport_mqtt_common.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_device_client_ll.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_client_ll.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_client_core_ll.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_client_ll_uploadtoblob.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_client_authorization.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_client_retry_control.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_client_diagnostic.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_message.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothubtransport.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothubtransportmqtt.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothubtransporthttp.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothubtransport_mqtt_common.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub_transport_ll_private.c"
"${AZURE_SDK_DIR}/iothub_client/src/version.c"
"${AZURE_SDK_DIR}/umqtt/src/mqtt_client.c"
"${AZURE_SDK_DIR}/umqtt/src/mqtt_codec.c"
"${AZURE_SDK_DIR}/umqtt/src/mqtt_message.c"
"${AZURE_SDK_DIR}/deps/parson/parson.c"
"${AZURE_SDK_DIR}/serializer/src/codefirst.c"
"${AZURE_SDK_DIR}/serializer/src/agenttypesystem.c"
"${AZURE_SDK_DIR}/serializer/src/commanddecoder.c"
"${AZURE_SDK_DIR}/serializer/src/datamarshaller.c"
"${AZURE_SDK_DIR}/serializer/src/datapublisher.c"
"${AZURE_SDK_DIR}/serializer/src/dataserializer.c"
"${AZURE_SDK_DIR}/serializer/src/iotdevice.c"
"${AZURE_SDK_DIR}/serializer/src/jsondecoder.c"
"${AZURE_SDK_DIR}/serializer/src/jsonencoder.c"
"${AZURE_SDK_DIR}/serializer/src/methodreturn.c"
"${AZURE_SDK_DIR}/serializer/src/multitree.c"
"${AZURE_SDK_DIR}/serializer/src/schema.c"
"${AZURE_SDK_DIR}/serializer/src/schemalib.c"
"${AZURE_SDK_DIR}/serializer/src/schemaserializer.c"
"${AZURE_SDK_DIR}/iothub_client/src/iothub.c"
"${AZURE_SDK_DIR}/c-utility/src/http_proxy_io.c"
"${AZURE_SDK_DIR}/c-utility/src/azure_base32.c"
"${AZURE_SDK_DIR}/provisioning_client/src/prov_device_client.c"
"${AZURE_SDK_DIR}/provisioning_client/src/prov_transport_mqtt_client.c"
"${AZURE_SDK_DIR}/provisioning_client/src/prov_transport_mqtt_common.c"
"${AZURE_SDK_DIR}/provisioning_client/src/prov_security_factory.c"
"${AZURE_SDK_DIR}/provisioning_client/src/prov_device_ll_client.c"
"${AZURE_SDK_DIR}/provisioning_client/src/iothub_security_factory.c"
"${AZURE_SDK_DIR}/provisioning_client/src/iothub_auth_client.c"
"${AZURE_SDK_DIR}/provisioning_client/src/prov_auth_client.c"
"${AZURE_SDK_DIR}/provisioning_client/adapters/hsm_client_data.c"
"${AZURE_SDK_DIR}/provisioning_client/adapters/hsm_client_tpm.c"
"${AZURE_SDK_DIR}/provisioning_client/adapters/hsm_client_key.c"
"${AZURE_SDK_DIR}/provisioning_client/deps/utpm/src/tpm_codec.c"
"${AZURE_SDK_DIR}/provisioning_client/deps/utpm/src/Marshal.c"
"${AZURE_SDK_DIR}/provisioning_client/deps/utpm/src/tpm_comm_emulator.c"
"${AZURE_SDK_DIR}/provisioning_client/deps/utpm/src/Memory.c"
"src/tpm_socket_comm.c"
#"${AZURE_SDK_DIR}/provisioning_client/deps/utpm/src/tpm_socket_comm.c"
${MBEDTLS_DIR}/library/aes.c
${MBEDTLS_DIR}/library/aesni.c
${MBEDTLS_DIR}/library/aria.c
${MBEDTLS_DIR}/library/asn1parse.c
${MBEDTLS_DIR}/library/asn1write.c
${MBEDTLS_DIR}/library/base64.c
${MBEDTLS_DIR}/library/bignum.c
${MBEDTLS_DIR}/library/camellia.c
${MBEDTLS_DIR}/library/ccm.c
${MBEDTLS_DIR}/library/chacha20.c
${MBEDTLS_DIR}/library/chachapoly.c
${MBEDTLS_DIR}/library/cipher.c
${MBEDTLS_DIR}/library/cipher_wrap.c
${MBEDTLS_DIR}/library/cmac.c
${MBEDTLS_DIR}/library/ctr_drbg.c
${MBEDTLS_DIR}/library/des.c
${MBEDTLS_DIR}/library/dhm.c
${MBEDTLS_DIR}/library/ecdh.c
${MBEDTLS_DIR}/library/ecdsa.c
${MBEDTLS_DIR}/library/ecjpake.c
${MBEDTLS_DIR}/library/ecp.c
${MBEDTLS_DIR}/library/ecp_curves.c
${MBEDTLS_DIR}/library/entropy.c
${MBEDTLS_DIR}/library/entropy_poll.c
${MBEDTLS_DIR}/library/#error.c
${MBEDTLS_DIR}/library/gcm.c
${MBEDTLS_DIR}/library/hkdf.c
${MBEDTLS_DIR}/library/hmac_drbg.c
${MBEDTLS_DIR}/library/md.c
${MBEDTLS_DIR}/library/md5.c
${MBEDTLS_DIR}/library/memory_buffer_alloc.c
${MBEDTLS_DIR}/library/mps_reader.c
${MBEDTLS_DIR}/library/mps_trace.c
${MBEDTLS_DIR}/library/nist_kw.c
${MBEDTLS_DIR}/library/oid.c
${MBEDTLS_DIR}/library/padlock.c
${MBEDTLS_DIR}/library/pem.c
${MBEDTLS_DIR}/library/pk.c
${MBEDTLS_DIR}/library/pk_wrap.c
${MBEDTLS_DIR}/library/pkcs12.c
${MBEDTLS_DIR}/library/pkcs5.c
${MBEDTLS_DIR}/library/pkparse.c
${MBEDTLS_DIR}/library/pkwrite.c
${MBEDTLS_DIR}/library/platform.c
${MBEDTLS_DIR}/library/platform_util.c
${MBEDTLS_DIR}/library/poly1305.c
${MBEDTLS_DIR}/library/psa_crypto.c
${MBEDTLS_DIR}/library/psa_crypto_aead.c
${MBEDTLS_DIR}/library/psa_crypto_cipher.c
${MBEDTLS_DIR}/library/psa_crypto_client.c
${MBEDTLS_DIR}/library/psa_crypto_driver_wrappers.c
${MBEDTLS_DIR}/library/psa_crypto_ecp.c
${MBEDTLS_DIR}/library/psa_crypto_hash.c
${MBEDTLS_DIR}/library/psa_crypto_mac.c
${MBEDTLS_DIR}/library/psa_crypto_rsa.c
${MBEDTLS_DIR}/library/psa_crypto_se.c
${MBEDTLS_DIR}/library/psa_crypto_slot_management.c
${MBEDTLS_DIR}/library/psa_crypto_storage.c
${MBEDTLS_DIR}/library/psa_its_file.c
${MBEDTLS_DIR}/library/ripemd160.c
${MBEDTLS_DIR}/library/rsa.c
${MBEDTLS_DIR}/library/rsa_alt_helpers.c
${MBEDTLS_DIR}/library/sha1.c
${MBEDTLS_DIR}/library/sha256.c
${MBEDTLS_DIR}/library/sha512.c
${MBEDTLS_DIR}/library/threading.c
${MBEDTLS_DIR}/library/timing.c
${MBEDTLS_DIR}/library/version.c
${MBEDTLS_DIR}/library/x509.c
${MBEDTLS_DIR}/library/x509_create.c
${MBEDTLS_DIR}/library/x509_crl.c
${MBEDTLS_DIR}/library/x509_crt.c
${MBEDTLS_DIR}/library/x509_csr.c
${MBEDTLS_DIR}/library/x509write_crt.c
${MBEDTLS_DIR}/library/x509write_csr.c
${MBEDTLS_DIR}/library/debug.c
${MBEDTLS_DIR}/library/net_sockets.c
${MBEDTLS_DIR}/library/ssl_cache.c
${MBEDTLS_DIR}/library/ssl_ciphersuites.c
${MBEDTLS_DIR}/library/ssl_cli.c
${MBEDTLS_DIR}/library/ssl_cookie.c
${MBEDTLS_DIR}/library/ssl_msg.c
${MBEDTLS_DIR}/library/ssl_srv.c
${MBEDTLS_DIR}/library/ssl_ticket.c
${MBEDTLS_DIR}/library/ssl_tls.c
${MBEDTLS_DIR}/library/ssl_tls13_keys.c
${MBEDTLS_DIR}/library/ssl_tls13_server.c
${MBEDTLS_DIR}/library/ssl_tls13_client.c
${MBEDTLS_DIR}/library/ssl_tls13_generic.c    
)

target_include_directories(AzureSDK PUBLIC
"./inc"
"${WIZNET_DIR}/Ethernet"
"${WIZNET_DIR}/Internet/dhcp"
"${WIZNET_DIR}/Internet/dns"
"${WIZNET_DIR}/Internet/SNTP"
"${MBEDTLS_DIR}/include"
"${AZURE_SDK_DIR}/certs"
"${AZURE_SDK_DIR}/c-utility/inc"
"${AZURE_SDK_DIR}/c-utility/deps/azure-macro-utils-c/inc"
"${AZURE_SDK_DIR}/c-utility/deps/umock-c/inc"
"${AZURE_SDK_DIR}/c-utility/pal/inc"
"${AZURE_SDK_DIR}/c-utility/pal/freertos"
"${AZURE_SDK_DIR}/c-utility/pal/generic"
"${AZURE_SDK_DIR}/iothub_client/inc"
"${AZURE_SDK_DIR}/umqtt/inc"
"${AZURE_SDK_DIR}/umqtt/inc/azure_umqtt_c"
"${AZURE_SDK_DIR}/serializer/inc"
"${AZURE_SDK_DIR}/deps/parson"
"${AZURE_SDK_DIR}/provisioning_client/inc"
"${AZURE_SDK_DIR}/provisioning_client/adapters"
"${AZURE_SDK_DIR}/provisioning_client/deps/utpm/inc"
)

add_definitions(-DDONT_USE_UPLOADTOBLOB)

add_definitions(-DUSE_PROV_MODULE)

#add_definitions(-DHSM_TYPE_SYMM_KEY)
add_definitions(-DHSM_TYPE_X509)

#add_definitions(-DHSM_TYPE_SAS_TOKEN)

#add_definitions(-DUSE_BALTIMORE_CERT)
#add_definitions(-DUSE_MICROSOFTAZURE_DE_CERT)
#add_definitions(-DUSE_PORTAL_AZURE_CN_CERT)

target_link_libraries(AzureSDK PUBLIC
pico_stdlib
ETHERNET_FILES
SNTP_FILES
)
